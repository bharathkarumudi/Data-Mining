#!/bin/sh
echo "Script started at: `date`"

#----- Variables Declaration ------#
dataloc=/mnt/disks/MLProject/data
#75:25 ratio
trainCount=6520
testCount=4348

cd $dataloc
rm -rf random_Labels.csv r_TrainLabels.csv r_Testlabels.csv r_train_dataset r_test_dataset
mkdir -p r_test_dataset r_train_dataset
r_train_data_loc=r_train_dataset
r_test_data_loc=r_test_dataset

#Randomize the Lables file
trainLabels=trainLabels.csv
shuf $trainLabels > random_Labels.csv
wait

#Split the labels to Train and Test
head -$trainCount random_Labels.csv > r_TrainLabels.csv
tail -$testCount random_Labels.csv > r_Testlabels.csv
sed -i '1i "Id","Class"' r_TrainLabels.csv
sed -i '1i "Id","Class"' r_Testlabels.csv

#Copy the Train and Test files to different directories
#-- Train Files
cat r_TrainLabels.csv | \
while read filename
do
echo $filename | awk -F"," '{print $1}' | sed 's/\"//g' | xargs -I {} cp $dataloc/train_dataset/"{}".bytes $r_train_data_loc/
done

#-- Test Files
cat r_Testlabels.csv | \
while read filename
do
echo $filename | awk -F"," '{print $1}' | sed 's/\"//g' | xargs -I {} cp $dataloc/train_dataset/"{}".bytes $r_test_data_loc/
done

echo "\nScript ended at: `date`"
